
IP=$1

mkdir "$IP"_manual_assess
cd "$IP"_manual_assess
clear

/etc/init.d/postgresql start
msfdb init

echo -e "\e[1;31m----------------------------------------\e[00m"

echo "Setting up workspaces"

msfconsole --quiet -x "setg RHOSTS $IP; workspace -a "$IP"_workspace; workspace "$IP"_workspace; db_import ../"$IP"_recon/"$IP"_TCP_scan.XML ;
services -c name,info $IP;
exit y"


echo 
echo -e "\e[1;31m----------------------------------------\e[00m"

while true; do
	echo
	echo -e "\e[1;31m----------------------------------------\e[00m" 
	echo -e "\e[1;33mWhat would you like to test?\e[00m"
	
	echo "1. HTTP"
	echo "2. SMB"
	echo "3. MySQL"
	echo "4. Postgres"
	echo "5. SMTP"
	echo "6. SNMP"
	echo "7. FTP"
	echo "8. SSH and Telnet"
	echo "9. POP3 and IMAP"
	echo "10. VNC and X11 Servers"
	echo "11. Go Back"

	read SCANANS

	case $SCANANS in 
		1) msfconsole --quiet -x "setg RHOSTS $IP; spool "$IP"_http_scan.txt ; resource ../../../resource/http_test.rc; exit y"
		;;
		2) msfconsole --quiet -x "setg RHOSTS $IP; spool "$IP"_smb_scan.txt ; resource ../../../resource/smb_test.rc; exit y"
		;;
		3) msfconsole --quiet -x "setg RHOSTS $IP; spool "$IP"_mysql_scan.txt ; resource ../../../resource/mysql_test.rc; exit y"
		;;
		4) msfconsole --quiet -x "setg RHOSTS $IP; spool "$IP"_ftp_scan.txt ; resource ../../../resource/postgres_test.rc; exit y"
		;;
		5) msfconsole --quiet -x "setg RHOSTS $IP; spool "$IP"_smtp_scan.txt ; resource ../../../resource/smtp_test.rc; exit y"
		;;
		6) msfconsole --quiet -x "setg RHOSTS $IP; spool "$IP"_snmp_scan.txt ; resource ../../../resource/snmp_test.rc; exit y"
		;;
		7) msfconsole --quiet -x "setg RHOSTS $IP; spool "$IP"_ftp_scan.txt ; resource ../../../resource/ftp_test.rc; exit y"
		;;
		8) msfconsole --quiet -x "setg RHOSTS $IP; spool "$IP"_ssh_scan.txt ; resource ../../../resource/ssh_test.rc; exit y"
		;;
		9) msfconsole --quiet -x "setg RHOSTS $IP; spool "$IP"_pop3_imap_scan.txt ; resource ../../../resource/pop3_imap_test.rc; exit y"
		;;
		10) msfconsole --quiet -x "setg RHOSTS $IP; spool "$IP"_vnc_x11_scan.txt ; resource ../../../resource/vnc_x11_test.rc; exit y"
		;;
		11) cd ../..
		return
		;;
	esac
	
done

cd ..

sleep 3


