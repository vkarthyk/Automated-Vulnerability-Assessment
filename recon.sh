
IP=$1

mkdir "$IP"_recon >/dev/null 2>&1
cd "$IP"_recon

	echo -e "\e[1;33m----------------------------------------\e[00m"
	echo -e "\e[1;33mStarting TCP Intense Scan with version detection and OS fingerprinting using Nmap\e[00m"
	echo ""

		nmap -v -T4 -A -oX "$IP"_TCP_scan.XML -oN "$IP"_TCP_scan.txt $IP
		
		UNIQUE=$(cat "$IP"_TCP_scan.XML |grep -i 'open"' |grep -i "portid=" |cut -d '"' -f 4,5,6| grep -o '[0-9]*' |sort --unique |paste -s -d,)
		echo $UNIQUE >"$IP"_open_ports.txt
		echo -e "\e[00;32m$UNIQUE\e[00m"

	echo -e "TCP scan for \e[00;32m$IP\e[00m finished"
	echo
	echo -e "Output has been saved in XML(\e[00;32m"$IP"_TCP_scan.XML\e[00m) and txt(\e[00;32m"$IP"_TCP_scan.txt\e[00m) formats."
	echo
	echo -e "\e[1;33m----------------------------------------\e[00m"


	echo -e "\e[1;33mPerforming whois lookup and retrieving Netcraft information using dmitry\e[00m"
	echo ""

		dmitry -wino "$IP"_whois_lookup.txt $IP

	echo -e "Output has been saved in \e[00;32m"$IP"_whois_lookup.txt\e[00m."
	echo
	echo -e "\e[1;33m----------------------------------------\e[00m"


	echo -e "\e[1;33mRetrieving subdomains and email addresses using theHarvester\e[00m"
	echo ""

		theharvester -d $IP -l 300 -b all -f "$IP"_information

	
	echo -e "Output has been saved in \e[00;32m"$IP"_information.txt\e[00m."
	echo
	echo -e "\e[1;33m----------------------------------------\e[00m"

	cd ../..

sleep 3
